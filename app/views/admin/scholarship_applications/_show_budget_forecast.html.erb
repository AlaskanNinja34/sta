<div class="card mb-4">
  <div class="card-header">
    <h5 class="mb-0"><i class="fas fa-dollar-sign"></i> Budget Forecast</h5>
  </div>
  <div class="card-body">
    <% resources = [
      [:student_contribution, "Student Contribution"],
      [:parent_contribution, "Parent Contribution"],
      [:spouse_contribution, "Spouse Contribution"],
      [:native_corp_grant1_amount, "Native Corporation Grant 1"],
      [:native_corp_grant2_amount, "Native Corporation Grant 2"],
      [:anb_ans_grant, "ANB/ANS Grant"],
      [:pell_grant, "Pell Grant"],
      [:tuition_exemption, "Tuition Exemption"],
      [:college_work_study, "College Work Study"],
      [:college_scholarship_amount, "College Scholarship"],
      [:alaska_student_loan, "Alaska Student Loan"],
      [:stafford_loan, "Stafford Loan"],
      [:alaska_supplemental_loan, "Alaska Supplemental Loan"],
      [:alaska_family_education_loan, "Alaska Family Education Loan"],
      [:seog_grant, "SEOG Grant"],
      [:parent_plus_loan, "Parent Plus Loan"],
      [:government_assistance, "Government Assistance"],
      [:veterans_assistance, "Veteran's Assistance"],
      [:other_resource1_amount, "Other Resource 1"],
      [:other_resource2_amount, "Other Resource 2"]
    ] %>
    <% expenses = [
      [:tuition, "Tuition"],
      [:fees, "Fees"],
      [:room_board, "Room/Board"],
      [:books, "Books/Supplies"],
      [:transportation, "Local Transportation"],
      [:personal_expenses, "Personal Expenses"],
      [:other_expense1_amount, "Other Expense 1"],
      [:other_expense2_amount, "Other Expense 2"]
    ] %>
    <div class="row">
      <div class="col-md-6">
        <h6>Resources for College</h6>
        <table class="table table-sm table-bordered mb-3">
          <tbody>
            <% resources.each do |field, label| %>
              <tr>
                <td><%= label %></td>
                <td class="text-end"><%= number_to_currency(application.send(field) || 0) %></td>
              </tr>
            <% end %>
            <tr class="table-secondary fw-bold">
              <td>Total Resources</td>
              <td class="text-end"><%= number_to_currency(application.total_resources || 0) %></td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="col-md-6">
        <h6>College Expenses</h6>
        <table class="table table-sm table-bordered mb-3">
          <tbody>
            <% expenses.each do |field, label| %>
              <tr>
                <td><%= label %></td>
                <td class="text-end"><%= number_to_currency(application.send(field) || 0) %></td>
              </tr>
            <% end %>
            <tr class="table-secondary fw-bold">
              <td>Total Expenses</td>
              <td class="text-end"><%= number_to_currency(application.total_expenses || 0) %></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <table class="table table-bordered mt-3 mb-0">
      <tbody>
        <tr><td>Total Resources</td><td class="text-end"><%= number_to_currency(application.total_resources || 0) %></td></tr>
        <tr><td>Total Expenses</td><td class="text-end"><%= number_to_currency(application.total_expenses || 0) %></td></tr>
        <tr><td>Remaining Unmet Need</td><td class="text-end"><%= number_to_currency(application.unmet_need || 0) %></td></tr>
        <tr><td>Amount Requested</td><td class="text-end"><%= number_to_currency(application.amount_requested || 0) %></td></tr>
      </tbody>
    </table>
    <div class="mt-4">
      <strong>How will you cover your remaining financial need?</strong>
      <div><%= simple_format(application.cover_remaining_need.presence || "Not provided") %></div>
    </div>
  </div>
</div>
